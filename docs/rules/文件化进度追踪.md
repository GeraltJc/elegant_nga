# 文件化进度/任务追踪机制（本项目采用）

> 目标：不依赖任何在线工具（Jira/Notion 等），用仓库文件实现“任务可追溯、进度可回放、决策可解释”。

## 1. 三类核心文件

1) **Task（任务卡）**：一个需求/缺陷/重构对应一个文件  
2) **Daily Log（每日记录）**：按天记录做了什么、推进了哪些任务、有哪些阻塞  
3) **ADR（架构决策记录）**：记录“不可逆/高影响”的技术决策与取舍

目录约定：

- Tasks：`docs/progress/tasks/`
- Logs：`docs/progress/logs/`
- ADR：`docs/adr/`

## 2. Task 规则（最小字段集）

每个 Task 文件都应包含：

- `id`：`T-0001` 递增
- `status`：`todo` / `in_progress` / `blocked` / `done` / `canceled`
- `scope`：这件事**包含什么/不包含什么**
- `acceptance`：验收标准（尽量可测试）
- `links`：关联 ADR / 日志 / 设计文档

命名建议：`docs/progress/tasks/T-0001-简短标题.md`

## 3. Daily Log 规则

- 每天最多一个日志文件：`docs/progress/logs/YYYY-MM-DD.md`
- 记录原则：
  - “今天做了什么”必须能回放（命令、文件、决策）
  - “明天做什么”要指向具体 Task
  - “风险/阻塞”要明确下一步

## 4. ADR 规则（配合使用）

- 何时写 ADR：
  - 选型（HTTP client/测试框架/解析方案）
  - 数据口径、时间口径、增量策略
  - 任何未来改动成本高的决定
- ADR 编号：`ADR-0001-*.md` 递增

## 5. 与 TDD 的结合（强制）

- Task 的 `acceptance` 必须尽量落到测试（见 `docs/rules/TDD工作流.md`）
- 修复缺陷时，Task 中必须记录“复现方式/fixture/回归测试点”

## 6. 配套设施（模板与脚本）

- 模板：
  - `docs/progress/templates/TASK.md`
  - `docs/progress/templates/LOG.md`
  - `docs/adr/ADR-template.md`
- 脚本（可选但推荐）：
  - `scripts/progress/new-task.sh "标题"`
  - `scripts/progress/new-log.sh [YYYY-MM-DD]`

